# MaixPy视觉识别云台系统

## 项目简介

基于MaixPy和M0G3507主控的智能视觉识别云台系统，能够识别和跟踪特定人物目标，并提供安全监控功能。

## 系统功能

### 1. 人物识别功能
- 识别三个不同人物（动漫或真人形象，上半身，不大于5x5cm²）
- 人物贴在白底A4纸上，摄像头距离不少于50厘米
- 使用绿色框标记识别到的人物

### 2. 目标学习与跟踪
- 将目标人物贴纸放置在摄像头前进行学习和记录
- 贴纸移开后，自动识别A4纸上的对应人物
- 使用红色框标记目标人物

### 3. 安全监控系统
- 检测A4纸上是否存在目标人物
- 无目标人物时输出"SAFE"
- 发现目标人物时输出"WARNING"并启动蜂鸣器报警
- 按键解除报警功能

### 4. 云台控制
- 舵机云台控制（C语言实现）
- 自动跟踪目标人物

## 硬件要求

- **主控**: M0G3507
- **摄像头**: MaixPy兼容摄像头
- **云台**: 舵机云台
- **蜂鸣器**: 报警提示
- **按键**: 报警解除

## 软件架构

```
MaixPy_Vision_Tracking/
├── src/                    # 源代码目录
│   ├── vision/            # 视觉处理模块
│   │   ├── detection/     # 人物检测
│   │   ├── tracking/      # 目标跟踪
│   │   └── recognition/   # 人物识别
│   ├── hardware/          # 硬件控制模块
│   │   ├── camera/        # 摄像头控制
│   │   ├── buzzer/        # 蜂鸣器控制
│   │   └── button/        # 按键控制
│   └── utils/             # 工具函数
├── data/                  # 数据目录
│   ├── images/           # 图像数据
│   │   ├── person1/      # 人物1图像
│   │   ├── person2/      # 人物2图像
│   │   ├── person3/      # 人物3图像
│   │   ├── target_learning/ # 目标学习图像
│   │   └── temp/         # 临时图像
│   └── models/           # 模型文件
├── gimbal_c_code/        # 云台C语言代码目录
├── config/               # 配置文件
├── docs/                 # 文档
├── tests/                # 测试文件
└── examples/             # 示例代码
```

## 完成状态

### ✅ 第一阶段：基础视觉功能
- [x] 摄像头初始化和图像采集
- [x] 人物检测算法实现
- [x] 绿色框标记功能

### ✅ 第二阶段：目标学习与识别  
- [x] 目标人物学习模块
- [x] 特征提取和匹配算法
- [x] 红色框标记功能

### 🚧 第三阶段：安全监控系统
- [ ] 安全状态检测逻辑
- [ ] SAFE/WARNING状态输出
- [ ] 蜂鸣器报警系统

### ✅ 第四阶段：硬件集成
- [x] 触摸按键控制功能
- [x] 云台控制接口（C语言框架）
- [x] 触摸坐标映射和校准

## 技术规格

- **编程语言**: Python (MaixPy), C (云台控制)
- **图像处理**: OpenCV, MaixPy内置视觉库
- **人物识别**: 特征匹配算法
- **硬件通信**: UART, GPIO
- **实时性**: 实时图像处理和响应

## 安装与使用

### 环境要求
- MaixPy固件
- M0G3507开发环境
- Python 3.x (开发调试用)

### 快速开始
1. 准备三张人物图像（5x5cm²以内）
2. 将图像贴在白底A4纸上
3. 运行主程序
4. 进行目标学习
5. 开始监控

## 更新日志

### v1.0.0 (2025-09-14) - 核心功能完成
**主要功能实现:**
- ✅ 完整的人脸检测和识别系统
- ✅ 触摸界面控制系统
- ✅ 高帧率优化版本
- ✅ 触摸坐标精确校准

**新增文件:**
- `examples/simple_high_fps_gui.py` - 高帧率简化界面（推荐使用）
- `examples/standalone_gui.py` - 完整功能独立界面
- `examples/touch_coordinate_debug.py` - 触摸坐标校准工具
- `examples/test_calibrated_mapping.py` - 映射精度验证工具
- `src/vision/recognition/face_recognition.py` - 人脸识别核心模块
- `src/vision/detection/person_detector.py` - 人物检测核心模块

**技术突破:**
- 🎯 精确触摸坐标映射 (Scale: 1.6615x1.7352, Offset: -197.74,-140.00)
- 🚀 高帧率优化 (640x480@25-35FPS)
- 📱 大按键设计 (80x80像素)
- 🧠 简化人脸识别算法
- 🔄 实时FPS显示

**界面功能:**
- **REC按钮**: 2秒记录新人脸 (最多3个)
- **CLR按钮**: 清除所有记录
- **EXIT按钮**: 安全退出
- **实时识别**: 绿色框=已识别，红色框=未知，黄色框=记录中

**开发环境:**
- M0G3507 C语言开发环境 (GCC + VS Code)
- MaixPy触摸屏支持
- 跨平台构建系统

### v0.2.0 (2025-09-13) - 硬件集成
**主要更新:**
- 📱 触摸屏界面开发
- 🎮 虚拟按键系统
- 🔧 M0G3507开发环境配置
- 📡 UART通信协议设计

### v0.1.0 (2025-09-12) - 项目初始化
**项目建立:**
- 📁 完整项目结构
- 📋 开发计划制定
- 🏗️ 代码框架搭建

## 快速开始

### 推荐使用（高帧率版本）
```bash
# 运行高帧率人脸识别界面
python3 examples/simple_high_fps_gui.py
```

### 完整功能版本
```bash
# 运行完整功能界面
python3 examples/standalone_gui.py
```

### 触摸校准（如需要）
```bash
# 触摸坐标校准
python3 examples/touch_coordinate_debug.py

# 测试映射精度
python3 examples/test_calibrated_mapping.py
```

## 注意事项

- 确保摄像头与A4纸距离不少于50厘米
- 保持良好的光照条件
- 人物图像应清晰，背景简洁
- 已针对640x480显示屏优化触摸映射
- 建议使用高帧率版本获得最佳性能

